app:
  description: Magento 2.1.0 - 2.1.18
  supported_packages:
    magento/product-community-edition: ~2.1.0
    # magento/product-community-edition: 2.3.4-p1 ->=2.3.3 <2.3.4
    magento/product-enterprice-edition: ~2.1.0
  composition:
    runners:
      nginx-proxy-for-varnish:
        service: dv_nginx_proxy_for_varnish
    required:
      varnish:
        # Do not plan to support Varnish 3 for this actually very old Magento 2 version
        varnish_4:
          service: dv_varnish_4_magento
          parameters:
            backend_host: php-apache
            # Config path: web/secure/offloader_header. Changed to `X-Forwarded-Proto` since Magento 2.1
            ssl_offloaded_header: 'X-Forwarded-Proto'
            # Use `/pub/health_check.php` in case the web root equals to the project root
            health_check: '/health_check.php'
      apache:
        php_7.0_apache:
          service: dv_php_apache_unsecure
          dev_tools: dv_php_apache_dev_tools
          parameters:
            composer_version: 1
            php_version: '7.0'
            web_root: 'pub/'
        php_5.6_apache:
          service: dv_php_apache_unsecure
          dev_tools: dv_php_apache_dev_tools
          parameters:
            composer_version: 1
            php_version: '5.6'
            web_root: 'pub/'
      database:
        mysql_5.7_persistent:
          service: dv_mysql_persistent
          parameters:
            mysql_version: '5.7'
        mysql_5.6_persistent:
          service: dv_mysql_persistent
          parameters:
            mysql_version: '5.6'
#          - mariadb:10.1
#          - mariadb:10.2
#          - mariadb:10.3
    optional:
      redis:
        redis_5.0:
          service: dv_redis
          parameters:
            redis_version: '5.0'
      elasticsearch:
        elasticsearch_6.8.11:
          service: elasticsearch
          parameters:
            elasticsearch_version: '6.8.11'
        elasticsearch_6.8.11_persistent:
          service: elasticsearch_persistent
          parameters:
            elasticsearch_version: '6.8.11'